buildscript {
    ext {
        def projectConfigFilePath = "$rootDir/actito-gradle-config.json"
        def jsonFile = new File(projectConfigFilePath)
        actitoConfig = new groovy.json.JsonSlurper().parseText(jsonFile.text)
    }

    repositories {
        google()
        mavenCentral()
        maven { url "https://maven.notifica.re/releases" }
    }
    dependencies {
        String actitoServicesGradlePluginClassPath = "re.notifica.gradle:notificare-services:${actitoConfig.ACTITO_SERVICES_GRADLE_PLUGIN_VERSION}"
        println "Adding classpath: $actitoServicesGradlePluginClassPath"
        classpath actitoServicesGradlePluginClassPath
    }
}

android {
    kotlinOptions {
        jvmTarget = cordovaConfig.KOTLIN_JVM_TARGET ?: '1.8'
        freeCompilerArgs += [
                '-Xopt-in=com.actito.InternalActitoApi',
        ]
    }
}

repositories {
    google()
    mavenCentral()
    maven { url "https://maven.notifica.re/releases" }
    maven { url "https://maven.notifica.re/prereleases" }
}

dependencies {
    def actito_version = '5.0.0-canary.2'
    implementation "com.actito:actito:$actito_version"
    implementation "com.actito:actito-utilities:$actito_version"
}

cdvPluginPostBuildExtras.add({
    apply plugin: re.notifica.gradle.NotificareServicesPlugin
})
